{
  "description": "GetConsultantMatchDetails - Query 2 Output Example",
  "note": "Hydration query - returns consultant details and top 2 matching requirements. One row per consultant. MatchingScore and PricePerformanceScore are placeholders (0) - filled by app from Query 1.",
  "columnOrder": "ConsultantId, IsPinned, MatchingScore, PricePerformanceScore, FirstName, LastName, PhotoUrl, RoleTitle, EuroFixedRate, TotalMatchingRequirements, TopMatchesJson, TopMatches",
  "singleRow": {
    "ConsultantId": "550e8400-e29b-41d4-a716-446655440001",
    "IsPinned": 1,
    "MatchingScore": 0,
    "PricePerformanceScore": 0,
    "FirstName": "György",
    "LastName": "Almási",
    "PhotoUrl": "https://storage.example.com/photos/ga-round.jpg",
    "RoleTitle": "Quality Assurance Specialist",
    "EuroFixedRate": 85.00,
    "TotalMatchingRequirements": 5,
    "TopMatchesJson": "[{\"RequirementId\":\"req-001\",\"RequirementName\":\"Cognigy\",\"ConsultantScore\":10},{\"RequirementId\":\"req-002\",\"RequirementName\":\"AI Testing\",\"ConsultantScore\":10}]",
    "TopMatches": null,
    "TopMatches (expanded for documentation)": [
      {
        "RequirementId": "req-001",
        "RequirementName": "Cognigy",
        "ConsultantScore": 10
      },
      {
        "RequirementId": "req-002",
        "RequirementName": "AI Testing",
        "ConsultantScore": 10
      }
    ]
  },
  "exampleResultSet": [
    {
      "ConsultantId": "550e8400-e29b-41d4-a716-446655440001",
      "IsPinned": 1,
      "MatchingScore": 0,
      "PricePerformanceScore": 0,
      "FirstName": "György",
      "LastName": "Almási",
      "PhotoUrl": "https://storage.example.com/photos/ga-round.jpg",
      "RoleTitle": "Quality Assurance Specialist",
      "EuroFixedRate": 85.00,
      "TotalMatchingRequirements": 5,
      "TopMatchesJson": "[{\"RequirementId\":\"req-001\",\"RequirementName\":\"Cognigy\",\"ConsultantScore\":10},{\"RequirementId\":\"req-002\",\"RequirementName\":\"AI Testing\",\"ConsultantScore\":10}]",
      "TopMatches": null
    },
    {
      "ConsultantId": "550e8400-e29b-41d4-a716-446655440002",
      "IsPinned": 0,
      "MatchingScore": 0,
      "PricePerformanceScore": 0,
      "FirstName": "Ralph",
      "LastName": "Luedecke",
      "PhotoUrl": "https://storage.example.com/photos/rl-round.jpg",
      "RoleTitle": "Quality Assurance Specialist",
      "EuroFixedRate": 75.00,
      "TotalMatchingRequirements": 4,
      "TopMatchesJson": "[{\"RequirementId\":\"req-003\",\"RequirementName\":\"Test Automation Conception\",\"ConsultantScore\":10},{\"RequirementId\":\"req-002\",\"RequirementName\":\"AI Testing\",\"ConsultantScore\":6}]",
      "TopMatches": null
    },
    {
      "ConsultantId": "550e8400-e29b-41d4-a716-446655440003",
      "IsPinned": 0,
      "MatchingScore": 0,
      "PricePerformanceScore": 0,
      "FirstName": "Hüseyin Ibrahim",
      "LastName": "Adam",
      "PhotoUrl": "https://storage.example.com/photos/ha-round.jpg",
      "RoleTitle": "Quality Assurance Specialist",
      "EuroFixedRate": 0,
      "TotalMatchingRequirements": 3,
      "TopMatchesJson": "[{\"RequirementId\":\"req-003\",\"RequirementName\":\"Test Automation Conception\",\"ConsultantScore\":10},{\"RequirementId\":\"req-002\",\"RequirementName\":\"AI Testing\",\"ConsultantScore\":4}]",
      "TopMatches": null
    }
  ],
  "fieldDescriptions": {
    "ConsultantId": "Consultant.Id - the matched consultant's unique identifier",
    "IsPinned": "Boolean (0/1): true if consultant is already assigned to this demand (exists in DemandConsultants)",
    "MatchingScore": "Placeholder (returns 0). Actual value from Query 1, mapped in application layer.",
    "PricePerformanceScore": "Placeholder (returns 0). Actual value from Query 1, mapped in application layer.",
    "FirstName": "From ConsultancyUser (if IsInternal=1) or ExternalUser (if IsInternal=0)",
    "LastName": "From ConsultancyUser (if IsInternal=1) or ExternalUser (if IsInternal=0)",
    "PhotoUrl": "DefaultPhotoUrlRound from ConsultancyUser or ExternalUser based on IsInternal",
    "RoleTitle": "Consultant.TopRoleId → Role.NameLocaleKeyId → LocaleDict.TextValue (filtered by @SystemLanguage)",
    "EuroFixedRate": "Consultant.EuroFixedRate - displayed on consultant card",
    "TotalMatchingRequirements": "Total count of requirements where consultant has Score > 0",
    "TopMatchesJson": "JSON string containing array of top 2 requirements (ranked by partial_score contribution)",
    "TopMatches": "NULL placeholder for OutSystems structure definition (actual data is in TopMatchesJson)"
  },
  "topMatchesJsonStructure": {
    "description": "Expanded structure of TopMatchesJson array elements",
    "fields": {
      "RequirementId": "DemandRequirement.Id",
      "RequirementName": "Localized name via category-specific join (SkillAlias/RoleAlias/Industry/FunctionalArea/Language → LocaleDict)",
      "ConsultantScore": "Experience.Score * 2 - scaled to 0-10 range"
    },
    "example": [
      {
        "RequirementId": "req-001",
        "RequirementName": "Cognigy",
        "ConsultantScore": 10
      },
      {
        "RequirementId": "req-002",
        "RequirementName": "AI Testing",
        "ConsultantScore": 10
      }
    ]
  },
  "topMatchesNote": "TopMatchesJson is sorted by partial_score contribution to MatchingScore, not by ConsultantScore. A requirement with 8% weight at 4/4 (100% fulfillment = 8% contribution) ranks higher than 10% weight at 3/5 (60% fulfillment = 6% contribution).",
  "appLayerMapping": {
    "description": "After Query 2 returns, map MatchingScore and PricePerformanceScore from Query 1 results",
    "pseudoCode": "FOR each row in Query2Results: match = Query1Results.Find(r => r.Id == row.ConsultantId); row.MatchingScore = match.MatchingScore; row.PricePerformanceScore = match.PricePerformanceScore"
  }
}
